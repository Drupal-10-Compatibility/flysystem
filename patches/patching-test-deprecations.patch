diff --git a/PATCHES.txt b/PATCHES.txt
deleted file mode 100644
index 11d2d12..0000000
--- a/PATCHES.txt
+++ /dev/null
@@ -1,3 +0,0 @@
-This file was automatically generated by Composer Patches (https://github.com/cweagans/composer-patches)
-Patches applied to this directory:
-
diff --git a/src/FlysystemFactory.php b/src/FlysystemFactory.php
index fed8800..26c32a9 100644
--- a/src/FlysystemFactory.php
+++ b/src/FlysystemFactory.php
@@ -19,8 +19,6 @@ use Symfony\Contracts\EventDispatcher\EventDispatcherInterface;
  */
 class FlysystemFactory {
 
-  use SerializationStopperTrait;
-
   /**
    * Default settings.
    *
@@ -197,6 +195,14 @@ class FlysystemFactory {
     return $errors;
   }
 
+  /**
+   * Prevents the class from being serialized.
+   */
+  public function __sleep() {
+    $message = sprintf('%s can not be serialized. This probably means you are serializing an object that has an indirect reference to the %s object. Adjust your code so that is not necessary.', __CLASS__, __CLASS__);
+    throw new \LogicException($message);
+  }
+
   /**
    * Returns the adapter for a scheme.
    *
diff --git a/src/SerializationStopperTrait.php b/src/SerializationStopperTrait.php
deleted file mode 100644
index ce0fe39..0000000
--- a/src/SerializationStopperTrait.php
+++ /dev/null
@@ -1,18 +0,0 @@
-<?php
-
-namespace Drupal\flysystem;
-
-/**
- * Stops a class from being serialized.
- */
-trait SerializationStopperTrait {
-
-  /**
-   * Prevents the class from being serialized.
-   */
-  public function __sleep() {
-    $message = sprintf('%s can not be serialized. This probably means you are serializing an object that has an indirect reference to the %s object. Adjust your code so that is not necessary.', __CLASS__, __CLASS__);
-    throw new \LogicException($message);
-  }
-
-}
diff --git a/tests/src/Unit/Plugin/FlysystemUrlTraitTest.php b/tests/src/Unit/Plugin/FlysystemUrlTraitTest.php
index 1155d85..d5d409d 100644
--- a/tests/src/Unit/Plugin/FlysystemUrlTraitTest.php
+++ b/tests/src/Unit/Plugin/FlysystemUrlTraitTest.php
@@ -13,13 +13,24 @@ use Drupal\Tests\UnitTestCase;
  */
 class FlysystemUrlTraitTest extends UnitTestCase {
 
+  // @codingStandardsIgnoreStart
+  /**
+   * Create an anonymous class for the provided trait.
+   *
+   * @param trait-string $traitName Name of the trait to create a mock for.
+   */
+  public function createMockForTrait(string $traitName) {
+    return eval('return new class { use ' . $traitName . '; };');
+  }
+  // @codingStandardsIgnoreEnd
+
   /**
    * @covers ::getExternalUrl
    * @covers ::getScheme
    * @covers ::getTarget
    */
   public function testGetExternalUrl() {
-    $trait = $this->getMockForTrait(FlysystemUrlTrait::class);
+    $trait = $this->createMockForTrait(FlysystemUrlTrait::class);
 
     $url_generator = $this->prophesize(UrlGenerator::class);
     $url_generator->generateFromRoute(
diff --git a/tests/src/Unit/Plugin/ImageStyleGenerationTraitTest.php b/tests/src/Unit/Plugin/ImageStyleGenerationTraitTest.php
index dbe15db..2727380 100644
--- a/tests/src/Unit/Plugin/ImageStyleGenerationTraitTest.php
+++ b/tests/src/Unit/Plugin/ImageStyleGenerationTraitTest.php
@@ -20,6 +20,17 @@ use Prophecy\Argument;
  */
 class ImageStyleGenerationTraitTest extends UnitTestCase {
 
+  // @codingStandardsIgnoreStart
+  /**
+   * Create an anonymous class for the provided trait.
+   *
+   * @param trait-string $traitName Name of the trait to create a mock for.
+   */
+  public function createMockForTrait(string $traitName) {
+    return eval('return new class { use ' . $traitName . '; };');
+  }
+  // @codingStandardsIgnoreStart
+
   /**
    * @covers ::generateImageStyle
    */
@@ -52,7 +63,7 @@ class ImageStyleGenerationTraitTest extends UnitTestCase {
 
     \Drupal::setContainer($container);
 
-    $trait = $this->getMockForTrait(ImageStyleGenerationTrait::class);
+    $trait = $this->createMockForTrait(ImageStyleGenerationTrait::class);
 
     $method = (new \ReflectionMethod($trait, 'generateImageStyle'))->getClosure($trait);
 
diff --git a/tests/src/Unit/SerializationStopperTraitTest.php b/tests/src/Unit/SerializationStopperTraitTest.php
deleted file mode 100644
index 71a242a..0000000
--- a/tests/src/Unit/SerializationStopperTraitTest.php
+++ /dev/null
@@ -1,24 +0,0 @@
-<?php
-
-namespace Drupal\Tests\flysystem\Unit;
-
-use Drupal\flysystem\SerializationStopperTrait;
-use Drupal\Tests\UnitTestCase;
-
-/**
- * @coversDefaultClass \Drupal\flysystem\SerializationStopperTrait
- * @group flysystem
- */
-class SerializationStopperTraitTest extends UnitTestCase {
-
-  /**
-   * @covers ::__sleep
-   */
-  public function test() {
-    $this->expectException(\LogicException::class);
-    $this->expectExceptionMessage('can not be serialized.');
-    $trait = $this->getMockForTrait(SerializationStopperTrait::class);
-    serialize($trait);
-  }
-
-}
